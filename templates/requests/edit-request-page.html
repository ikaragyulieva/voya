{% extends 'base.html' %}
{% load static %}


{% block content %}
    <div class="edit-delete edit-photo">
        <h2>Edit Request</h2>

        <form method="post" action="{% url 'edit-request' pk=object.pk %}">
            {% csrf_token %}

            {{ form.non_field_errors }}

            <div class="form-section">
                <h3>Travelers Information</h3>
                <div class="form-fields">

                    <p>Travelers nationality *</p>
                    {{ form.nationality }}
                    {% if form.nationality.errors %}
                        <div class="error">{{ form.nationality.errors }}</div>
                    {% endif %}

                    <p>Country of origin *</p>
                    {{ form.country_origin }}
                    {% if form.country_origin.errors %}
                        <div class="error">{{ form.country_origin.errors }}</div>
                    {% endif %}

                    <p>Travelers average age *</p>
                    {{ form.age_range }}
                    {% if form.age_range.errors %}
                        <div class="error">{{ form.age_range.errors }}</div>
                    {% endif %}

                    <p>Minimum participants *</p>
                    {{ form.min_participants }}
                    {% if form.min_participants.errors %}
                        <div class="error">{{ form.min_participants.errors }}</div>
                    {% endif %}

                    <p>Maximum participants *</p>
                    {{ form.max_participants }}
                    {% if form.max_participants.errors %}
                        <div class="error">{{ form.max_participants.errors }}</div>
                    {% endif %}
                </div>

            </div>

            <div class="form-section">
                <h3>Trip Information</h3>

                <div class="form-fields">

                    <p>Total budget *</p>
                    {{ form.budget }}
                    {% if form.budget.errors %}
                        <div class="error">{{ form.budget.errors }}</div>
                    {% endif %}

                    <p>Currency *</p>
                    {{ form.currency }}
                    {% if form.currency.errors %}
                        <div class="error">{{ form.currency.errors }}</div>
                    {% endif %}

                    <p>Trip duration (in days)</p>
                    {{ form.trip_duration }}
                    {% if form.trip_duration.errors %}
                        <div class="error">{{ form.trip_duration.errors }}</div>
                    {% endif %}

                    <p>Trip start date (approx.) *</p>
                    {{ form.trip_start_date }}
                    {% if form.trip_start_date.errors %}
                        <div class="error">{{ form.trip_start_date.errors }}</div>
                    {% endif %}

                    <p>Trip end date (approx.) *</p>
                    {{ form.trip_end_date }}
                    {% if form.trip_end_date.errors %}
                        <div class="error">{{ form.trip_end_date.errors }}</div>
                    {% endif %}

                    <p>Destinations *</p>
                    {{ form.country_destinations }}
                    {% if form.country_destinations.errors %}
                        <div class="error">{{ form.country_destinations.errors }}</div>
                    {% endif %}

                    {#                <p>Cities:</p>#}
                    {#                {{ form.city_destinations }}#}
                    {#                {% if form.city_destinations.errors %}#}
                    {#                    <div class="error">{{ form.city_destinations.errors }}</div>#}
                    {#                {% endif %}#}

                    <p>Other destinations </p>
                    {{ form.other_destinations }}
                    {% if form.other_destinations.errors %}
                        <div class="error">{{ form.other_destinations.errors }}</div>
                    {% endif %}

                    <p>Transportation type *</p>
                    {{ form.transportation_type }}
                    {% if form.transportation_type.errors %}
                        <div class="error">{{ form.transportation_type.errors }}</div>
                    {% endif %}

                    <p>Transportation details</p>
                    {{ form.transportation_details }}
                    {% if form.transportation_details.errors %}
                        <div class="error">{{ form.transportation_details.errors }}</div>
                    {% endif %}

                    <p>Accommodations type *</p>
                    {{ form.accommodations }}
                    {% if form.accommodations.errors %}
                        <div class="error">{{ form.accommodations.errors }}</div>
                    {% endif %}

                    <p>Accommodations details </p>
                    {{ form.accommodations_details }}
                    {% if form.accommodations_details.errors %}
                        <div class="error">{{ form.accommodations_details.errors }}</div>
                    {% endif %}

                    <p>Meals *</p>
                    {{ form.meals }}
                    {% if form.meals.errors %}
                        <div class="error">{{ form.meals.errors }}</div>
                    {% endif %}

                    <p>Meals details</p>
                    {{ form.meals_details }}
                    {% if form.meals_details.errors %}
                        <div class="error">{{ form.meals_details.errors }}</div>
                    {% endif %}

                    <p>Staff</p>
                    {{ form.staff }}
                    {% if form.staff.errors %}
                        <div class="error">{{ form.staff.errors }}</div>
                    {% endif %}

                    <p>Group type </p>
                    {{ form.kind_of_group }}
                    {% if form.kind_of_group.errors %}
                        <div class="error">{{ form.kind_of_group.errors }}</div>
                    {% endif %}

                    <p>Trip type</p>
                    {{ form.type_of_trip }}
                    {% if form.type_of_trip.errors %}
                        <div class="error">{{ form.type_of_trip.errors }}</div>
                    {% endif %}

                    <p>Additional observations</p>
                    {{ form.additional_observations }}
                    {% if form.additional_observations.errors %}
                        <div class="error">{{ form.additional_observations.errors }}</div>
                    {% endif %}

                </div>

                {% if request.user.role == 'employee' %}
                    <div class="form-section">
                        <h3>Company Info</h3>
                        <div class="form-fields">
                            <p>Company *</p>
                            {{ form.created_by_company }}
                            {% if form.created_by_company.errors %}
                                <div class="error">{{ form.created_by_company.errors }}</div>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
                <div class="action-btns">
                    <button class="add-btn" type="submit">Save Changes</button>
                    <button class="add-btn" type="button"
                            {% if request.user.role == 'client' %}
                            onclick="window.location.href='{% url 'client-dashboard' pk=profile.pk %}'"
                            {% else %}
                            onclick="window.location.href='{% url 'employee-dashboard' pk=profile.pk %}'"
                            {% endif %}
                    >Cancel
                    </button>
                </div>
        </form>

    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/multi_select.js' %}"></script>
    <script src="{% static 'js/date-formatting.js' %}"></script>
{% endblock %}